{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Emre\\\\Desktop\\\\Decentralized-Press\\\\decentralized-press\\\\src\\\\NewsPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport getContract from \"./utilities/getContract\";\nimport { Link } from \"react-router-dom\";\nimport NewsList from \"./components/NewsList\";\nimport New from \"./components/New\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function FeedPage() {\n  _s();\n\n  const [relatedFeeds, setRelatedFeeds] = useState([]); // state variable to store the current feed\n\n  const [feed, setFeed] = useState([]); // Function to get the feed id from the url\n\n  const getUrlValue = () => {\n    let vars = {};\n    window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n      vars[key] = value;\n    });\n    return vars;\n  };\n  /*\r\n   * Get Feed\r\n   */\n\n\n  const getFeed = async () => {\n    try {\n      const contract = await getContract();\n      let feedId = getUrlValue()[\"id\"];\n      const singleFeed = await contract.getFeed(feedId); // Format feed\n\n      const formattedFeed = {\n        id: singleFeed[0],\n        title: singleFeed[1],\n        description: singleFeed[2],\n        location: singleFeed[3],\n        category: singleFeed[4],\n        coverImageHash: singleFeed[5],\n        date: singleFeed[6],\n        author: singleFeed[7]\n      };\n      setFeed(formattedFeed);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  /*\r\n   * Get Related Feeds\r\n   */\n\n\n  const getRelatedFeeds = async () => {\n    try {\n      const contract = await getContract();\n      let feedId = getUrlValue()[\"id\"]; // Get all feeds and return feeds and filter only the one in the same category as the feed\n\n      const allFeeds = await contract.getAllFeeds();\n      const singleFeed = await contract.getFeed(feedId); // Format feed\n\n      const formattedSingleFeed = {\n        id: singleFeed[0],\n        title: singleFeed[1],\n        description: singleFeed[2],\n        location: singleFeed[3],\n        category: singleFeed[4],\n        coverImageHash: singleFeed[5],\n        date: singleFeed[6],\n        author: singleFeed[7]\n      };\n      const relatedFeeds = allFeeds.filter(feed => feed.category === formattedSingleFeed.category);\n      const formattedFeeds = relatedFeeds.map(feed => {\n        return {\n          id: feed.id,\n          title: feed.title,\n          description: feed.description,\n          location: feed.location,\n          category: feed.category,\n          coverImageHash: feed.coverImageHash,\n          author: feed.author,\n          date: feed.date\n        };\n      });\n      setRelatedFeeds(formattedFeeds);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getFeed();\n    getRelatedFeeds();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full  flex flex-row\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col m-10 justify-between lg:flex-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:w-4/6 w-6/6\",\n          children: feed && /*#__PURE__*/_jsxDEV(Feed, {\n            feed: feed\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 52\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2/6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xl font-bold dark:text-white ml-5 mb-3 text-black\",\n            children: [\"Related Feeds\", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"bg-red-600 hover:bg-red-800 text-white font-bold px-2 rounded ml-10\",\n                children: \"Go Back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), relatedFeeds.map(f => {\n            return /*#__PURE__*/_jsxDEV(Link, {\n              onClick: () => {\n                setFeed(f);\n              },\n              to: `/feed?id=${f.id}`,\n              children: /*#__PURE__*/_jsxDEV(FeedList, {\n                feed: f,\n                horizontal: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FeedPage, \"68/ypMhPXGJpLCHKI+CAaZNa6W8=\");\n\n_c = FeedPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"FeedPage\");","map":{"version":3,"names":["React","useEffect","useState","getContract","Link","NewsList","New","FeedPage","relatedFeeds","setRelatedFeeds","feed","setFeed","getUrlValue","vars","window","location","href","replace","m","key","value","getFeed","contract","feedId","singleFeed","formattedFeed","id","title","description","category","coverImageHash","date","author","error","console","log","getRelatedFeeds","allFeeds","getAllFeeds","formattedSingleFeed","filter","formattedFeeds","map","f"],"sources":["C:/Users/Emre/Desktop/Decentralized-Press/decentralized-press/src/NewsPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport getContract from \"./utilities/getContract\";\r\nimport { Link } from \"react-router-dom\";\r\nimport NewsList from \"./components/NewsList\";\r\nimport New from \"./components/New\";\r\n\r\nexport default function FeedPage() {\r\n  const [relatedFeeds, setRelatedFeeds] = useState([]);\r\n\r\n  // state variable to store the current feed\r\n  const [feed, setFeed] = useState([]);\r\n\r\n  // Function to get the feed id from the url\r\n  const getUrlValue = () => {\r\n    let vars = {};\r\n    window.location.href.replace(\r\n      /[?&]+([^=&]+)=([^&]*)/gi,\r\n      function (m, key, value) {\r\n        vars[key] = value;\r\n      }\r\n    );\r\n    return vars;\r\n  };\r\n\r\n  /*\r\n   * Get Feed\r\n   */\r\n  const getFeed = async () => {\r\n    try {\r\n      const contract = await getContract();\r\n      let feedId = getUrlValue()[\"id\"];\r\n      const singleFeed = await contract.getFeed(feedId);\r\n\r\n      // Format feed\r\n      const formattedFeed = {\r\n        id: singleFeed[0],\r\n        title: singleFeed[1],\r\n        description: singleFeed[2],\r\n        location: singleFeed[3],\r\n        category: singleFeed[4],\r\n        coverImageHash: singleFeed[5],\r\n        date: singleFeed[6],\r\n        author: singleFeed[7],\r\n      };\r\n\r\n      setFeed(formattedFeed);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  /*\r\n   * Get Related Feeds\r\n   */\r\n  const getRelatedFeeds = async () => {\r\n    try {\r\n      const contract = await getContract();\r\n      let feedId = getUrlValue()[\"id\"];\r\n      // Get all feeds and return feeds and filter only the one in the same category as the feed\r\n      const allFeeds = await contract.getAllFeeds();\r\n      const singleFeed = await contract.getFeed(feedId);\r\n      // Format feed\r\n      const formattedSingleFeed = {\r\n        id: singleFeed[0],\r\n        title: singleFeed[1],\r\n        description: singleFeed[2],\r\n        location: singleFeed[3],\r\n        category: singleFeed[4],\r\n        coverImageHash: singleFeed[5],\r\n        date: singleFeed[6],\r\n        author: singleFeed[7],\r\n      };\r\n      const relatedFeeds = allFeeds.filter(\r\n        (feed) => feed.category === formattedSingleFeed.category\r\n      );\r\n\r\n      const formattedFeeds = relatedFeeds.map((feed) => {\r\n        return {\r\n          id: feed.id,\r\n          title: feed.title,\r\n          description: feed.description,\r\n          location: feed.location,\r\n          category: feed.category,\r\n          coverImageHash: feed.coverImageHash,\r\n          author: feed.author,\r\n          date: feed.date,\r\n        };\r\n      });\r\n\r\n      setRelatedFeeds(formattedFeeds);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getFeed();\r\n    getRelatedFeeds();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-full  flex flex-row\">\r\n      <div className=\"flex-1 flex flex-col\">\r\n        <div className=\"flex flex-col m-10 justify-between lg:flex-row\">\r\n          <div className=\"lg:w-4/6 w-6/6\">{feed && <Feed feed={feed} />}</div>\r\n          <div className=\"w-2/6\">\r\n            <h4 className=\"text-xl font-bold dark:text-white ml-5 mb-3 text-black\">\r\n              Related Feeds\r\n              <Link to=\"/\">\r\n                <button className=\"bg-red-600 hover:bg-red-800 text-white font-bold px-2 rounded ml-10\">\r\n                  Go Back\r\n                </button>\r\n              </Link>\r\n            </h4>\r\n            {relatedFeeds.map((f) => {\r\n              return (\r\n                <Link\r\n                  onClick={() => {\r\n                    setFeed(f);\r\n                  }}\r\n                  to={`/feed?id=${f.id}`}\r\n                >\r\n                  <FeedList feed={f} horizontal={true} />\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}