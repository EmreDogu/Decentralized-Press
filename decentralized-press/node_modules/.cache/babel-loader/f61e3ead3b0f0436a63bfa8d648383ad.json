{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Emre\\\\Desktop\\\\Decentralized-Press\\\\decentralized-press\\\\src\\\\HomePage.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport NewsList from \"./components/NewsList\";\nimport getContract from \"./utilities/getContract\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [news, setNews] = useState([]);\n  const [currentAccount, setCurrentAccount] = useState(\"\");\n\n  const checkIfWalletIsConnected = async () => {\n    try {\n      const {\n        ethereum\n      } = window;\n      const accounts = await ethereum.request({\n        method: \"eth_accounts\"\n      });\n\n      if (accounts.length !== 0) {\n        const account = accounts[0];\n        setCurrentAccount(account);\n        alert(\"Wallet is Connected!\");\n      } else {\n        alert(\"To write or vote a new, Ensure your wallet Connected!\");\n      }\n    } catch (err) {\n      console.log(`${err.message}`);\n    }\n  };\n\n  const connectWallet = async () => {\n    try {\n      const {\n        ethereum\n      } = window;\n\n      if (!ethereum) {\n        alert(\"Make sure you have MetaMask Connected\");\n        return;\n      }\n\n      const accounts = await ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      setCurrentAccount(accounts[0]);\n    } catch (err) {\n      console.log(`${err.message}`);\n    }\n  };\n\n  const getNews = async () => {\n    try {\n      const contract = await getContract();\n      const AllNews = await contract.getAllNews();\n      let votedNews = [];\n\n      for (let i = 0; i < AllNews.length; ++i) {\n        if (AllNews[i].voted) {\n          if (AllNews[i].approved == 2) {\n            votedNews.push(AllNews[i]);\n          }\n        }\n      }\n\n      const formattedNew = votedNews.map(New => {\n        return {\n          id: New.id,\n          title: New.title,\n          description: New.description,\n          image: New.image,\n          author: New.author,\n          date: new Date(New.date * 1000)\n        };\n      });\n      setNews(formattedNew);\n    } catch (err) {\n      console.log(`${err.message}`);\n    }\n  };\n\n  useEffect(() => {\n    checkIfWalletIsConnected();\n    getNews();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"body\",\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Header\",\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          style: {\n            textDecoration: \"none\",\n            color: \"black\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }, this), currentAccount ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/writing\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Write a New\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/voting\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Vote a New\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            connectWallet();\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Connect your wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"NewsContainer\",\n      style: {\n        display: \"flex\",\n        flexWrap: \"wrap\"\n      },\n      children: news.map((New, index) => {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          className: \"links\",\n          to: `/New?id=${New.id}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"EveryNew\",\n            style: {\n              width: \"min-content\",\n              height: \"min-content\",\n              margin: \"50px\",\n              marginLeft: \"0px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(NewsList, {\n              New: New\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" Copyright\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"qr5FUdZgfQApJFOBSxYaY1E94qc=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Link","NewsList","getContract","App","news","setNews","currentAccount","setCurrentAccount","checkIfWalletIsConnected","ethereum","window","accounts","request","method","length","account","alert","err","console","log","message","connectWallet","getNews","contract","AllNews","getAllNews","votedNews","i","voted","approved","push","formattedNew","map","New","id","title","description","image","author","date","Date","display","flexDirection","justifyContent","alignItems","textDecoration","color","flexWrap","index","width","height","margin","marginLeft"],"sources":["C:/Users/Emre/Desktop/Decentralized-Press/decentralized-press/src/HomePage.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport NewsList from \"./components/NewsList\";\r\nimport getContract from \"./utilities/getContract\";\r\n\r\nfunction App() {\r\n  const [news, setNews] = useState([]);\r\n  const [currentAccount, setCurrentAccount] = useState(\"\");\r\n\r\n  const checkIfWalletIsConnected = async () => {\r\n    try {\r\n      const { ethereum } = window;\r\n\r\n      const accounts = await ethereum.request({ method: \"eth_accounts\" });\r\n\r\n      if (accounts.length !== 0) {\r\n        const account = accounts[0];\r\n        setCurrentAccount(account);\r\n        alert(\"Wallet is Connected!\");\r\n      } else {\r\n        alert(\"To write or vote a new, Ensure your wallet Connected!\");\r\n      }\r\n    } catch (err) {\r\n      console.log(`${err.message}`);\r\n    }\r\n  };\r\n\r\n  const connectWallet = async () => {\r\n    try {\r\n      const { ethereum } = window;\r\n\r\n      if (!ethereum) {\r\n        alert(\"Make sure you have MetaMask Connected\");\r\n        return;\r\n      }\r\n\r\n      const accounts = await ethereum.request({\r\n        method: \"eth_requestAccounts\",\r\n      });\r\n      setCurrentAccount(accounts[0]);\r\n    } catch (err) {\r\n      console.log(`${err.message}`);\r\n    }\r\n  };\r\n\r\n  const getNews = async () => {\r\n    try {\r\n      const contract = await getContract();\r\n      const AllNews = await contract.getAllNews();\r\n      let votedNews = [];\r\n      for (let i=0; i < AllNews.length; ++i) {\r\n        if (AllNews[i].voted) {\r\n          if (AllNews[i].approved==2) {\r\n            votedNews.push(AllNews[i]);\r\n          }\r\n        }\r\n    }\r\n\r\n      const formattedNew = votedNews.map((New) => {\r\n        return {\r\n          id: New.id,\r\n          title: New.title,\r\n          description: New.description,\r\n          image: New.image,\r\n          author: New.author,\r\n          date: new Date(New.date * 1000),\r\n        };\r\n      });\r\n      setNews(formattedNew);\r\n    } catch (err) {\r\n      console.log(`${err.message}`);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkIfWalletIsConnected();\r\n    getNews();\r\n  }, []);\r\n\r\n  return (\r\n    <div className='body' style={{display: \"flex\", flexDirection: \"column\"}}>\r\n      <div className='Header' style={{display: \"flex\", flexDirection: \"row\", justifyContent:\"space-between\", alignItems:\"center\"}}>\r\n      <div>\r\n        <Link to=\"/\" style={{textDecoration:\"none\", color:\"black\"}}>\r\n          <h1>Home</h1>\r\n        </Link>\r\n      </div>\r\n\r\n      {currentAccount ? (\r\n        <div>\r\n          <Link to=\"/writing\">\r\n            <button>\r\n              <span>Write a New</span>\r\n            </button>\r\n          </Link>\r\n          <Link to=\"/voting\">\r\n            <button>\r\n              <span>Vote a New</span>\r\n            </button>\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <button\r\n            onClick={() => {\r\n              connectWallet();\r\n            }}\r\n          >\r\n            <span>Connect your wallet</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n      </div>\r\n        <div className='NewsContainer' style={{display: \"flex\", flexWrap: \"wrap\"}}>\r\n          {news.map((New, index) => {\r\n            return (\r\n              <Link className='links' to={`/New?id=${New.id}`} key={index}>\r\n                <div className='EveryNew' style={{width: \"min-content\", height: \"min-content\", margin: \"50px\", marginLeft: \"0px\"}}>\r\n                  <NewsList New={New} />\r\n                </div>\r\n              </Link>\r\n            );\r\n          })}\r\n        </div>\r\n        <div> Copyright</div>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}